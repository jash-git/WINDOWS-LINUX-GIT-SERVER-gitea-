var Ssbadge=Ssbadge||{};Ssbadge.config=Ssbadge.config||{prefix:"sitetag",pubhost:"https://pub.sitetag.us/",statichost:"https://static.sitetag.us/",logoHtml:"SiteTag",filename:"gsbadge.js",apihost:"https://apis.sitetag.us/",lang:"zh-tw",total:0};
Ssbadge.lang=Ssbadge.lang||{en:{title:"Your website tags generator.",waiting:"which is producing tags, please wait for a moment......",head:"content tag cloud V2",get:"get widget"},tw:{title:"&#32178;&#31449;&#27161;&#31844;&#29986;&#29983;&#22120;",waiting:"&#27491;&#22312;&#29986;&#29983;&#27161;&#31844;&#65292;&#35531;&#31245;&#24460;......",head:"&#20839;&#23481;&#27161;&#31844;&#38642;V2",get:"&#21462;&#24471;&#22806;&#25499;"},cn:{title:"&#32593;&#31449;&#26631;&#31844;&#20135;&#29983;&#22120;",
waiting:"&#27491;&#22312;&#20135;&#29983;&#26631;&#31844;&#65292;&#35831;&#31245;&#21518;......",head:"&#31934;&#20934;&#26631;&#31844;&#20113;",get:"&#20869;&#23481;&#26631;&#31844;&#20113;V2"}};if(!String.prototype.toCamel)String.prototype.toCamel=function(){return String(this).replace(/[-_\s]\D/gi,function(d){return d.charAt(d.length-1).toUpperCase()})};
(function(){Ssbadge.util=Ssbadge.util||{};var d=Ssbadge.util;Ssbadge.util.Dom=Ssbadge.util.Dom||{_reClassNameCache:{},_getClassRegEx:function(a){var c=d.Dom._reClassNameCache[a];if(!c){c=RegExp("(?:^|\\s+)"+a+"(?:\\s+|$)");d.Dom._reClassNameCache[a]=c}return c},getElementsByClassName:function(a,c,b,e){c=c||"*";b=b||document;var f=[];c=b.getElementsByTagName(c);a=d.Dom._getClassRegEx(a);b=0;for(var g=c.length;b<g;b++)if(a.test(c[b].className)){f[f.length]=c[b];e&&e.call(c[b],c[b])}return f},batch:function(a,
c,b,e){var f=[];e=e?b:window;if(a&&c){if(a.tagName||a.length===undefined)return c.call(e,a,b);for(var g=0;g<a.length;g++)f[f.length]=c.call(e,a[g],b)}else return false;return f},hasClass:function(a,c){return d.Dom.batch(a,d.Dom._hasClass,c)},_hasClass:function(a,c){var b=false;if(a&&c){b=a.className||"";b=c.exec?c.test(b):c&&(" "+b+" ").indexOf(" "+c+"")>-1}return b},addClass:function(a,c){return d.Dom.batch(a,d.Dom._addClass,c)},_addClass:function(a,c){var b=false,e;if(a&&c){e=a.className||"";if(!d.Dom._hasClass(a,
c)){a.className=e+" "+c;b=true}}return b},removeClass:function(a,c){return d.Dom.batch(a,d.Dom._removeClass,c)},_removeClass:function(a,c){var b=false;if(a&&c){b=a.className||"";a.className=b.replace(d.Dom._getClassRegEx(c),"");b=true}return b},setStyle:function(a,c,b){d.Dom.batch(a,d.Dom._setStyle,{prop:c,val:b})},_setStyle:function(){return document.uniqueID?function(a,c){var b=c.prop.toCamel(),e=c.val;if(a)switch(b){case "opacity":if(a.style.filter){a.style.filter="alpha(opacity="+e*100+")";if(!a.currentStyle||
!a.currentStyle.hasLayout)a.style.zoom=1}break;case "float":b="styleFloat";default:a.style[b]=e}}:function(a,c){var b=c.prop.toCamel(),e=c.val;if(a){if(b=="float")b="cssFloat";a.style[b]=e}}}()}})();
(function(){Ssbadge.util.color=Ssbadge.util.color||{rgb_merge:function(d){if(parseInt(d.length)!=3)return false;var a=[],c;for(c in d){if(d[c].length<2)d[c]="0"+d[c];a[c]=d[c]}return a.join("")},rgb_split:function(d){d=d.toLowerCase();var a,c,b,e=parseInt(d.length);if(e!=3&&e!=6)return false;w=d.replace(/[a-f0-9]/gi,"");if(w!="")return false;if(3==e){a=d.substr(0,1);c=d.substr(1,1);b=d.substr(2,1);a+=a;c+=c;b+=b}if(6==e){a=d.substr(0,2);c=d.substr(2,2);b=d.substr(4,2)}return[a,c,b]},rgb_linear:function(d,
a,c){var b=[],e=[],f,g;if(!a||!d)return false;g=this.rgb_split(a);a=this.rgb_split(d);if(!g||!a)return false;b=[];d=[];for(f in g)b[f]=parseInt(g[f],16);for(f in a)d[f]=parseInt(a[f],16);gap=c-1;f=(d["0"]-b["0"])/gap;g=(d["1"]-b["1"])/gap;b=(d["2"]-b["2"])/gap;f=f<0?Math.ceil(f):Math.floor(f);g=g<0?Math.ceil(g):Math.floor(g);b=b<0?Math.ceil(b):Math.floor(b);b=[f,g,b];e[0]=this.rgb_merge(a);f=1;for(c=c-1;f<=c;f++){d=[d["0"]-b["0"],d["1"]-b["1"],d["2"]-b["2"]];a=[];for(var m in d)a[m]=parseInt(d[m],
10).toString(16);e[f]=this.rgb_merge(a)}return e}}})();
(function(){var d=Ssbadge.util.Dom;Ssbadge.util.createEl=Ssbadge.util.createEl||{get:function(a,c,b){a=document.createElement(a);for(var e in c)a[e]=c[e];if(b)a.innerHTML=b;this.append(a);return a},append:function(a){(document.getElementsByTagName("head")[0]||document.body).appendChild(a)},remove:function(a){setTimeout(function(){a.parentNode.removeChild(a);a=null},0)},js:function(a,c){var b=this.get("script",{src:a,type:"text/javascript"},null);c&&b.setAttribute("charset",c);return b},css:function(a,
c){c||(c="all");return this.get("link",{href:a,rel:"stylesheet",type:"text/css",media:c},null,"head")},template:function(a,c){a.className=a.className||Ssbadge.config.prefix;document.write('<iframe allowtransparency="true" frameborder="no" frameBorder="no" marginWidth="0" marginHeight="0" border="0" scrolling="no" width="100%" height="137" src="about:blank" class="'+a.className+'"></iframe>');var b=d.getElementsByClassName(a.className,"iframe")[0];window.XMLHttpRequest&&d.setStyle(b,"margin-bottom",
"10px");var e=b.contentWindow;if(c){e.document.open();e.document.write(c);e.document.close()}return b}}})();
(function(){var d=Ssbadge.util,a=document.getElementsByTagName("head")[0];Ssbadge.util.JSONP=Ssbadge.util.JSONP||{_oRequests:{},request:function(c){var b=document.getElementsByTagName("script"),e=new Date;e=e.getMonth()+1+"_"+e.getDate()+"_"+e.getFullYear();var f="req_"+b.length+"_"+e;b={};b.sRequestId=f;b.callback=function(g){d.JSONP.callback(f,g)};b.realCallback=c.callback;b.onTimeout=c.onTimeout;c.callback="Ssbadge.util.JSONP._oRequests."+f+".callback";if(c.url.indexOf("?")==-1)c.url+="?";e="";
if(e=="")e+="&";e+="callback="+c.callback;c.url+=e;e=document.createElement("script");b.script=e;e.setAttribute("src",c.url);e.setAttribute("type","text/javascript");b.timeout=setTimeout(function(){d.JSONP.timeoutClear(f)},5E3);a.appendChild(e);d.JSONP._oRequests[f]=b},callback:function(c,b){var e=d.JSONP._oRequests[c];e&&clearTimeout(e.timeout);e.realCallback(b);delete d.JSONP._oRequests[c]},timeoutClear:function(c){var b=d.JSONP._oRequests[c];if(b){var e={};e.sRequestId=b.sRequestId;e.oConfig={};
for(var f in b.oConfig)e.oConfig[f]=b.oConfig[f];f=b.onTimeout;delete b[c];f&&f(e)}}}})();
(function(){Ssbadge.config.total=!Ssbadge.config.total?0:Ssbadge.config.total;Ssbadge.config.total++;var d=Ssbadge.util.Dom,a=function(j,l){j=j.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var h=RegExp("[\\?&]"+j+"=([^&#]*)");return!h.exec(l)?"":h.exec(l)[1]};dScripts=document.body.getElementsByTagName("script");var c,b,e,f,g,m,q,r,n=false,u=dScripts[dScripts.length-1],k=u.src.toString();/\/(\w+\.js)\?/.exec(k);if(u.src&&RegExp.$1===Ssbadge.config.filename){c=a("hash",k);if(!c)return;b=(b=a("background_color",
k))?"#"+b:"#fff";g=(g=a("color",k))?"#"+g:"#000";a("width",k);f=(f=a("border_width",k))?f+"px":"4px";e=(e=a("border_color",k))?"#"+e:"#999";m=(m=a("limit",k))?m:"30";q=(q=a("inner_background_color",k))?"#"+q:"#ffc";a("extra",k);r=(r=a("open",k))?r:"default";a=navigator.browserLanguage?navigator.browserLanguage:navigator.userLanguage?navigator.userLanguage:navigator.language;Ssbadge.config.lang=a.toLowerCase();n=true}if(n){switch(Ssbadge.config.lang){case "en":var s=Ssbadge.lang.en.title,t=Ssbadge.lang.en.waiting;
a=Ssbadge.lang.en.head;n=Ssbadge.lang.en.get;break;case "zh-cn":s=Ssbadge.lang.cn.title;t=Ssbadge.lang.cn.waiting;a=Ssbadge.lang.cn.head;n=Ssbadge.lang.cn.get;break;default:s=Ssbadge.lang.tw.title;t=Ssbadge.lang.tw.waiting;a=Ssbadge.lang.tw.head;n=Ssbadge.lang.tw.get}b=["<!doctype html public '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'>","<html>","<head>",'<base target="_top">','<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />','<link rel="stylesheet" type="text/css" href="https://static.sitetag.us/reset-fonts-grids.css">',
'<style type="text/css">',"html {background-color:"+b+";}","body {background-color:"+b+";}",".sitetag {width:100%;-moz-border-radius:5px;-moz-border-radius-bottomright:0;-webkit-border-radius:5px;background:"+e+";}",".sitetag-hd {text-align:left;}",".sitetag-hd h3 {margin:0 5px 0;padding:5px;color:#ffcc00;letter-spacing:1px;}",".sitetag-bd {zoom:1;text-align:left;margin:0 "+f+" 2px !important;background:"+q+";border:solid 1px #000;border-width:1px 1px 1px 1px;border-right-color:#fff;border-bottom-color:#fff;}",
".sitetag-bd div {padding:5px;line-height:1.5;text-align:center;}",".sitetag-bd .loading {background:url(https://static.sitetag.us/loading.gif) center center no-repeat;height:70px;}",".sitetag-bd a:link,",".sitetag-bd a:visited {white-space:nowrap;margin-right:10px;font-family:Arial;color:"+g+";text-decoration:none;}",".sitetag-bd a:hover {text-decoration:underline;}",".sitetag-bd .level1 {font-size:77%;}",".sitetag-bd .level2 {font-size:100%;}",".sitetag-bd .level3 {font-size:108.1%;}",".sitetag-bd .level4 {font-size:123.1%;}",
".sitetag-bd .level5 {font-size:153.9%;}",".sitetag-ft {text-align:left;zoom:1;}",'.sitetag-ft:after {content:"";display:block;clear:both;visibility:hidden;height:0;}',".sitetag-ft img {border:none;}",".sitetag-ft cite {float:left;display:block;padding:"+parseInt(f)/2+"px 5px "+parseInt(f)/2+"px;color:#000;font:normal 85% Verdana;text-decoration:none;}",".sitetag-ft cite a:link,.sitetag-ft cite a:visited {color:#ffcc00;font-family:Georgia !important;font-weight:bold;font-style:italic !important;}",
".sitetag-ft span {float:right;margin-right:10px;}",".sitetag-ft span a {font-size:93%;text-decoration:none;padding:5px 0;color:#d5d5d5;display:block;}","</style>","</head>","<body>",'<div class="'+Ssbadge.config.prefix+'">','<div class="'+Ssbadge.config.prefix+'-hd"><h3>'+a+"</h3></div>",'<div class="'+Ssbadge.config.prefix+'-bd">','<div class="'+Ssbadge.config.prefix+'-bd-container loading">',"</div>","</div>",'<div class="'+Ssbadge.config.prefix+'-ft">','<cite>Powered By <a target="_blank" href="http://sitetag.us/">'+
Ssbadge.config.logoHtml+"</a></cite>",'<span><a target="_blank" href="http://sitetag.us/register">'+n+"</a></span>","</div>","</div>","<script>","var total = "+Ssbadge.config.total+";","var Ssbadge = parent.Ssbadge;","var $D = parent.Ssbadge.util.Dom;",'var dBadgeIframe = $D.getElementsByClassName(Ssbadge.config.prefix + "-gsbadge-iframe-" + total, "iframe", parent.document);','var dContainer = $D.getElementsByClassName(Ssbadge.config.prefix, "div", document)[0];',"(function() {",'if (!document.getElementById("last")) {',
"setTimeout(arguments.callee, 100);","return","}","var iHeight = dContainer.offsetHeight;",'$D.setStyle(dBadgeIframe, "height", iHeight + "px");',"}());","<\/script>","</body>","</html>"];var o=Ssbadge.util.createEl.template({className:Ssbadge.config.prefix+"-gsbadge-iframe-"+Ssbadge.config.total},b.join(""));b=null;b=(new Date).getFullYear();var v=q.substring(1),x=g.substring(1);c={url:"https://apis.sitetag.us/api_rank_single_by_site.php?hash="+c+"&method=sitetag.getRankSingleTagListBySite&output=json&limit="+
m+"&r="+b,callback:function(j){var l,h=Ssbadge.util.color.rgb_linear(x,v,6);j=j.rsp.tags;if(j.length!==0){l=[];for(var p=0,y=j.length;p<y;p++)l[l.length]='<a id="'+(p==j.length-1?"last":"")+'" '+(r=="blank"?'target="_blank"':"")+' class="level'+j[p].level+'" href="'+j[p].url+'">'+j[p].term+"</a><wbr>"}else l=['<div class="empty">','<span id="last"><a style="font-family:Georgia;font-size:123.1%;font-style:italic;" target="_blank" href="http://sitetag.us">SiteTag</a> - <em style="font-style:normal;">'+
s+"</em><br/>"+t+"</span>","</div>"];(function(){if(o.contentWindow.document.body){if(typeof document.styleSheets[0]!=="undefined"&&document.styleSheets[0].addRule){var i=o.contentWindow.document.styleSheets[o.contentWindow.document.styleSheets.length-1];i.addRule(".sitetag .sitetag-bd .level5","color:#"+h[0]+" !important;");i.addRule(".sitetag .sitetag-bd .level4","color:#"+h[1]+" !important;");i.addRule(".sitetag .sitetag-bd .level3","color:#"+h[2]+" !important;");i.addRule(".sitetag .sitetag-bd .level2",
"color:#"+h[3]+" !important;");i.addRule(".sitetag .sitetag-bd .level1","color:#"+h[4]+" !important;");i.addRule(".sitetag .sitetag-bd a:hover","color:#"+h[0]+" !important;")}else{i=o.contentWindow.document.createElement("style");i.type="text/css";i.appendChild(document.createTextNode([".sitetag .sitetag-bd .level5 {color:#"+h[0]+" !important;}",".sitetag .sitetag-bd .level4 {color:#"+h[1]+" !important;}",".sitetag .sitetag-bd .level3 {color:#"+h[2]+" !important;}",".sitetag .sitetag-bd .level2 {color:#"+
h[3]+" !important;}",".sitetag .sitetag-bd .level1 {color:#"+h[4]+" !important;}",".sitetag .sitetag-bd a:hover {color:#"+h[0]+" !important;}"].join("")));o.contentWindow.document.getElementsByTagName("head")[0].appendChild(i)}i=d.getElementsByClassName(Ssbadge.config.prefix,"div",o.contentWindow.document)[0];i=d.getElementsByClassName(Ssbadge.config.prefix+"-bd-container","div",i)[0];i.innerHTML=l.join("");d.removeClass(i,"loading")}else setTimeout(arguments.callee,1)})()}};Ssbadge.util.JSONP.request(c);
c=null}})();
